<div class="body">

<!-- Header -->
<nav class="navbar navbar-light bg-white shadow-sm px-4">
  <div class="d-flex align-items-center">
    <!-- <img src="https://via.placeholder.com/32" alt="Logo" class="me-2"> -->
    <span class="h5 mb-0"><i class="bi bi-lightning-charge-fill"></i>Learn Fast</span>
  </div>
  <div class="d-flex align-items-center gap-3">
    <button class="btn btn-dark d-none d-sm-inline">DÃ©connexion</button>

    <div class="form-check form-switch toggle-switch">
      <input class="form-check-input" type="checkbox" id="darkModeToggle">
      <label class="form-check-label" for="darkModeToggle">ðŸŒ™</label>
    </div>
  </div>
</nav>

<!-- Main Layout -->
<div class="d-flex" style="height: calc(100vh - 56px); overflow: hidden;">

  <!-- Sidebar -->
  <div class="sidebar p-3 d-none d-sm-flex" id="sidebar">
    <div>
      <h6 class="text-muted mb-4">Workspace</h6>
      <button class="btn btn-success mb-3 w-100">Nouveau rÃ©sumÃ©</button>
      <div class="d-grid gap-2 mb-4">
        <h6 class="fw-light mb-1">Historiques</h6>
        <div class="d-flex flex-column gap-2 small pt-2">
          <a href="#" class="text-decoration-none text-secondary py-1 px-2 rounded">Introduction to AI</a>
          <a href="#" class="text-decoration-none text-secondary py-1 px-2 rounded">Deep Learning Basics</a>
          <a href="#" class="text-decoration-none text-secondary py-1 px-2 rounded">Understanding GPT Models</a>
        </div>
      </div>
    </div>

    <div class="mt-auto">
      <div class="d-flex gap-2 mb-2">
        <button class="btn btn-success btn-sm">EN</button>
        <button class="btn btn-light btn-sm">FR</button>
      </div>
      <div class="profile">
        <img src="assets/img/profile-img.jpg" alt="Profile" class="rounded-circle " style="width:30px; height:30px">
        <div class="profile-info mb-5">
          <strong>ugl</strong><br>
          <small>ultimategaminglegends</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Main -->
  <main class="flex-grow-1 p-4 d-flex flex-column" style="overflow-y: auto;">
    <div class="d-flex flex-wrap gap-2 mb-4">
      <button class="btn tab-button active">Document PDF</button>
      <!-- <button class="btn tab-button">Youtube</button>
      <button class="btn tab-button">Audio Source</button> -->
    </div>
    <div class="container p-3 rounded-3 upload-box d-flex flex-column justify-content-center align-items-center flex-grow-1">
        <div class="flex-grow-1 overflow-auto m-1 p-2 rounded-4 text_box">
            <div class="" *ngIf="summaryText">
              <img src="assets/img/profile-img.jpg" alt="Profile" class="rounded-circle mx-2" style="width:30px; height:30px">
              <p class="resume_text" [innerHtml]="summaryText"></p>
              <div class="d-flex flex-row">
                <button class="btn btn-light fs-5 mx-2" (click)="speak(speech)"><i class="bi bi-volume-up"></i></button>
                <button class="btn btn-light fs-5 mx-2" (click)="stopSpeech()"><i class="bi bi-stop-fill"></i></button>
                <button class="btn btn-light fs-5"><i class="bi bi-copy"></i></button>
              </div>
            </div>
            <div class="container_loader" *ngIf="isLoading">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
            </div>

        </div>
        <form (ngSubmit)="onUpload()" #file="ngForm">
          <div class="row g-2 p-3 mb-2 mt-1">
            <div class="col-10 rounded-4">
                <div class="input-group mb-3">
                    <label for="file" class="input-group-text"><i class="bi bi-file-earmark-arrow-up-fill"></i></label>
                    <input type="file" [(ngModel)]="file" name="file" id="file" class="form-control" (change)="onFileSelected($event)">
                </div>
            </div>
            <div class="col-2">
                <input type="submit" value="Resume" class="btn btn-success" *ngIf="!isLoading">
                <input type="submit" value="Resume" class="btn btn-success" *ngIf="isLoading" disabled>
            </div>
          </div>
        </form>
    </div>
  </main>

  <!-- Chat Area -->
  <aside class="d-none d-md-flex flex-column p-4 border-start bg-white" style="width: 500px;">
    <div class="d-flex flex-wrap gap-2 mb-4">
      <button class="btn tab-button active">Chat</button>
      <button class="btn tab-button">Note-taking</button>
      <button class="btn tab-button">Quiz Yourself</button>
      <button class="btn tab-button">Summary</button>
      <button class="btn tab-button">Flashcards</button>
    </div>
    <div class="flex-grow-1 d-flex flex-column align-items-center justify-content-center text-center">
      <img src="https://via.placeholder.com/150" class="mb-4" alt="Chat Illustration">
      <h6 class="text-muted">Chat</h6>
      <p class="text-secondary small">Chat with AI</p>
    </div>
  </aside>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  //pour le mode sombre
  const toggle = document.getElementById('darkModeToggle');
  toggle.addEventListener('change', function () {
    document.body.classList.toggle('dark-mode', this.checked);
  });
  // pour appliquer un fond Ã  l'histoique
  const historyLinks = document.querySelectorAll('.sidebar a');

  historyLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      historyLinks.forEach(l => l.classList.remove('active-history'));
      this.classList.add('active-history');
    });
  });
</script>
</div>

