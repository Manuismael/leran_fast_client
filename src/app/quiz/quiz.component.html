<div *ngIf="!showResult && questions.length" class="card p-3 mt-4 shadow-sm border-0">
  <h6 class="fw-bold mb-1">
    <i class="bi bi-question-circle me-1"></i>Quiz Yourself
  </h6>

  <div class="d-flex justify-content-between align-items-center small text-muted mb-2">
    <span class="badge bg-light text-dark">10 points/question</span>
    <span class="text-danger fw-semibold">{{ timer }}s</span>
    <span class="text-danger fw-semibold">{{ score }} points</span>
  </div>

  <p class="fw-semibold">
    {{ questions[currentIndex].questionText }}
  </p>

  <p class="small text-muted">
    Choisis la bonne réponse parmis les options suivantes:
  </p>

  <div class="d-grid gap-2">
    <button
      *ngFor="let option of questions[currentIndex].options"
      class="btn text-start border shadow-sm"
      [ngClass]="{
        'btn-light border-secondary-subtle': !selectedOption,
        'bg-success text-white fw-semibold': selectedOption && option.correct,
        'bg-danger text-white': selectedOption && !option.correct && option === selectedOption
      }"
      (click)="selectOption(option)"
      [disabled]="!!selectedOption"
    >
      <i *ngIf="selectedOption && option.correct" class="bi bi-check-circle-fill me-2"></i>
      <i *ngIf="selectedOption && !option.correct && option === selectedOption" class="bi bi-x-circle me-2"></i>
      {{ option.text }}
    </button>
  </div>

  <div *ngIf="showExplanation" class="alert alert-info mt-3">
    {{ questions[currentIndex].explanation }}
  </div>

  <div class="mt-3 d-flex justify-content-end">
    <button *ngIf="selectedOption" class="btn btn-primary" (click)="nextQuestion()">Suivant</button>
  </div>
</div>

<div *ngIf="showResult" class="text-center mt-4">
  <h4 class="fw-bold text-success">Quiz terminé !</h4>
  <p class="fs-5">Votre score final : {{ score }} / {{ questions.length * 10 }}</p>
  <button class="btn btn-outline-primary" (click)="resetQuiz()">Recommencer</button>
</div>
